I"Ã<h2 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h2>
<p>é¡¹ç›®ä¸­ç›´æ¥å¼•ç”¨æˆ–è€…ç›´æ¥ç¼–è¯‘æºç å¾—åˆ°çš„ijkplayeråœ¨æ’­æ”¾mkvæ–‡ä»¶æ—¶å‡ºç°ï¼ˆ-10000ï¼‰çš„é”™è¯¯ï¼Œå»é¡¹ç›®githubæŸ¥çœ‹äº†æ‰çŸ¥é“ï¼Œé»˜è®¤æ˜¯ä¸æ”¯æŒmkvå’Œrmvbæ ¼å¼è§†é¢‘çš„æ’­æ”¾çš„ã€‚
ç”¨äº†ä¸€å¤©æ—¶é—´è§£å†³ï¼ˆä¸ºä»€ä¹ˆç”¨äº†ä¸€å¤©ï¼Œå› ä¸ºæˆ‘è ¢å•Šï¼‰ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³çš„æ–¹æ³•ï¼ˆå®˜æ–¹ä¸Šé¢å…¶å®å·²ç»æœ‰äº†è¯¦ç»†çš„æ•™ç¨‹ï¼Œæ— å¥ˆæˆ‘å½“æ—¶æ²¡æœ‰å¾ˆè®¤çœŸçœ‹ã€‚)ï¼Œè¿™é‡Œä¸ºæˆ‘è‡ªå·±è¿™ä¸ªæ–°æ‰‹åšä¸ªè®°å½•ï¼š
ä»ç„¶æ˜¯é‡‡ç”¨ç¼–è¯‘æºç çš„æ–¹å¼å¼•å…¥ï¼Œåªæ˜¯éœ€è¦æŒ‰ç…§å®˜æ–¹çš„æ–¹æ³•æ›´æ”¹ä¸€ä¸‹è„šæœ¬æ–‡ä»¶
ijkplayerå®˜æ–¹åœ°å€ï¼šhttps://github.com/Bilibili/ijkplayer
è¿è¡Œç³»ç»Ÿï¼šMac OS</p>

<h2 id="ç¬¬ä¸€æ­¥-å®‰è£…-homebrew-git-yamndk">ç¬¬ä¸€æ­¥ å®‰è£… homebrew, git, yam,ndk</h2>
<p>è¿™ä¸ªç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œè¦ä¸å°±ä¸å†™äº†å§ã€‚ã€‚ã€‚ã€‚
<img src="http://upload-images.jianshu.io/upload_images/4273129-aca8d434f081d2ba.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>ndkçš„ç‰ˆæœ¬ä¸è¦ä½¿ç”¨15ï¼Œå¯ä»¥å»ç½‘ä¸Šä¸‹ä¸€ä¸ª14çš„ç‰ˆæœ¬ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯çš„çŠ¶å†µã€‚
ndk r14ä¸‹è½½åœ°å€ï¼š<a href="https://developer.android.google.cn/ndk/downloads/index.html">https://developer.android.google.cn/ndk/downloads/index.htm</a></p>
<h2 id="ç¬¬äºŒæ­¥-è¿›è¡Œæºç çš„ä¸‹æ‹‰">ç¬¬äºŒæ­¥ è¿›è¡Œæºç çš„ä¸‹æ‹‰</h2>
<ul>
  <li>åœ¨ç»ˆç«¯å†…è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>git clone https://github.com/Bilibili/ijkplayer.git ijkplayer-android
cd ijkplayer-android
git checkout -B latest k0.8.4
./init-android.sh
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h2 id="ç¬¬ä¸‰æ­¥-ä¿®æ”¹ç¼–è¯‘ffmpegç”¨çš„è„šæœ¬æ–‡ä»¶">ç¬¬ä¸‰æ­¥ ä¿®æ”¹ç¼–è¯‘ffmpegç”¨çš„è„šæœ¬æ–‡ä»¶</h2>
<ul>
  <li>åˆ é™¤é»˜è®¤çš„è„šæœ¬æ–‡ä»¶ï¼Œå¤åˆ¶module-default.shè„šæœ¬æ–‡ä»¶ï¼Œå°†å¤åˆ¶å‰¯æœ¬æ›´æ”¹ä¸ºé»˜è®¤è„šæœ¬æ–‡ä»¶åmodule.sh
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>cd config
rm module.sh
ln -s module-default.sh module.sh
cd ..
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h2 id="ç¬¬å››æ­¥-ç¼–è¯‘æºç ">ç¬¬å››æ­¥ ç¼–è¯‘æºç </h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>cd android/contrib
./compile-ffmpeg.sh clean
./compile-ffmpeg.sh all

cd ..
./compile-ijk.sh all
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="è‹¥æ‰§è¡Œç¼–è¯‘å¤±è´¥æç¤º">è‹¥æ‰§è¡Œç¼–è¯‘å¤±è´¥ï¼Œæç¤º</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>LOCAL_SRC_FILES points to a missing file
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å°è¯•æ›´æ¢ndkç‰ˆæœ¬ä¸ºr14</p>

<h5 id="è‹¥æ‰§è¡Œç¼–è¯‘å¤±è´¥æç¤º-1">è‹¥æ‰§è¡Œç¼–è¯‘å¤±è´¥ï¼Œæç¤º</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Android NDK: android-9 is unsupported. Using minimum supported version android-14ã€‚
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å°è¯•å»å¯¹åº”é”™è¯¯æ–‡ä»¶å¤¹ï¼ˆå¦‚android/ijkplayer/ijkplayer-armv5/src/mainä¸‹ï¼‰ä¿®æ”¹AndroidManifest.xmlä¸­ android:minSdkVersion=â€9â€æ”¹ä¸º android:minSdkVersion=â€14â€;</p>

<p>åŒæ—¶å¯¹åº”çš„jniæ–‡ä»¶ä¸‹çš„Application.mk ä¸­ APP_PLATFORM := android-9 æ”¹ä¸º
APP_PLATFORM := android-14ã€‚</p>

<h2 id="ç¬¬äº”æ­¥-é¡¹ç›®ä¸­åŠ å…¥å¯¹åº”çš„soåº“å’Œå¼•ç”¨">ç¬¬äº”æ­¥ é¡¹ç›®ä¸­åŠ å…¥å¯¹åº”çš„soåº“å’Œå¼•ç”¨</h2>

<ul>
  <li>
    <p>ç¼–è¯‘å®Œæˆåæˆ‘ä»¬å°†ijkplayeré¡¹ç›®å¯¼å…¥Android Studioä¸­è¿è¡Œä¸€ä¸‹ï¼Œ
å¯¼å…¥è¿™ä¸ªæ“ä½œä¸€å®šè¦åšï¼Œä¸ç„¶ä¸ä¼šç”Ÿæˆ
<strong>ijkplayer-java-release.aar</strong>æ–‡ä»¶
å¯¼å…¥çš„æ“ä½œå¦‚ä¸‹ï¼ˆé€‰ä¸­build.gradleæ–‡ä»¶ï¼‰ï¼š
<img src="http://upload-images.jianshu.io/upload_images/4273129-6b29a223cf7d76e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" />
<img src="http://upload-images.jianshu.io/upload_images/4273129-1061525861a30b7f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>
  </li>
  <li>ä¹‹åå°†æˆ‘ä»¬æ‰€éœ€æ¶æ„æ‰€å¯¹åº”çš„åŒ…å«soæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼ˆä¾‹ï¼šijkplayer-x86/src/main/libs/ä¸‹çš„x86æ–‡ä»¶å¤¹ï¼‰å’Œ<strong>ijkplayer-java-release.aar</strong>æ–‡ä»¶(åœ¨ijkplayer-java/build/output/aaræ–‡ä»¶å¤¹ä¸‹)æ‹·è´åˆ°æˆ‘ä»¬çš„é¡¹ç›®libsç›®å½•ä¸‹
<img src="http://upload-images.jianshu.io/upload_images/4273129-cf93e742fe67dfae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></li>
  <li>ç„¶ååœ¨build.gradleæ–‡ä»¶ä¸­æ·»åŠ </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>android{
...
sourceSets {
main {
jniLibs.srcDirs = ['libs']
}
}
}
repositories {
mavenCentral()
flatDir {
dirs 'libs'
}
}
dependencies {
...
compile(name: 'ijkplayer-java-release', ext: 'aar')
...
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>åˆ°æ­¤å°±æå®šäº†ï¼Œç„¶åä½¿ç”¨å°±å¥½äº†ï¼Œæ€ä¹ˆä½¿ç”¨ï¼Œè¿™ä¸ªç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œæˆ‘ä¹Ÿä¸è®²äº†å§ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
<img src="http://upload-images.jianshu.io/upload_images/4273129-aca8d434f081d2ba.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>
:ET